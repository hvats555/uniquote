[{"C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\index.js":"1","C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\App.js":"2","C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\reportWebVitals.js":"3","C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\firebase.js":"4","C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\Products\\ProductForm.js":"5","C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\Quotations\\QuotationForm.js":"6","C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\Products\\ProductSearch\\ProductSearch.js":"7","C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\UI\\Header.js":"8","C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\Home.js":"9","C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\Products\\AllProducts.js":"10","C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\Quotations\\AllQuotations.js":"11","C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\UI\\Logo\\Logo.js":"12","C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\Customers\\CustomerInputForm.js":"13","C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\Products\\ProductTable\\ProductTable.js":"14","C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\UI\\Layout\\Layout.js":"15","C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\QuotationTemplate\\QuotationTemplate.js":"16","C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\UI\\Modal\\Modal.js":"17","C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\Products\\ProductSearch\\ProductSearchResults\\ProductSearchResults.js":"18"},{"size":500,"mtime":499162500000,"results":"19","hashOfConfig":"20"},{"size":1357,"mtime":1607625567171,"results":"21","hashOfConfig":"20"},{"size":362,"mtime":499162500000,"results":"22","hashOfConfig":"20"},{"size":467,"mtime":1607163554729,"results":"23","hashOfConfig":"20"},{"size":1485,"mtime":1607539669757,"results":"24","hashOfConfig":"20"},{"size":6143,"mtime":1607868608909,"results":"25","hashOfConfig":"20"},{"size":2456,"mtime":1607878282104,"results":"26","hashOfConfig":"20"},{"size":676,"mtime":1607535984176,"results":"27","hashOfConfig":"20"},{"size":201,"mtime":1607535418030,"results":"28","hashOfConfig":"20"},{"size":789,"mtime":1607538758029,"results":"29","hashOfConfig":"20"},{"size":172,"mtime":1607530739500,"results":"30","hashOfConfig":"20"},{"size":187,"mtime":1607532671452,"results":"31","hashOfConfig":"20"},{"size":1576,"mtime":1607876453561,"results":"32","hashOfConfig":"20"},{"size":1684,"mtime":1607876320815,"results":"33","hashOfConfig":"20"},{"size":3362,"mtime":1607625675785,"results":"34","hashOfConfig":"20"},{"size":4186,"mtime":1607629508148,"results":"35","hashOfConfig":"20"},{"size":1167,"mtime":1607627081843,"results":"36","hashOfConfig":"20"},{"size":613,"mtime":1607878057870,"results":"37","hashOfConfig":"20"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},"1o2cly5",{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51","usedDeprecatedRules":"40"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\index.js",[],["76","77"],"C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\App.js",[],"C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\reportWebVitals.js",[],"C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\firebase.js",[],"C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\Products\\ProductForm.js",[],"C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\Quotations\\QuotationForm.js",["78"],"import React from 'react'\r\nimport {useState} from 'react';\r\nimport db from '../../firebase';\r\nimport firebase from 'firebase';\r\nimport ProductSearch from '../Products/ProductSearch/ProductSearch';\r\nimport ProductTable from '../Products/ProductTable/ProductTable';\r\nimport CustomerInputForm from '../Customers/CustomerInputForm';\r\nimport Button from '@material-ui/core/Button';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport Modal from '../UI/Modal/Modal';\r\nimport {Link} from 'react-router-dom';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  quotationSubmitButton : {\r\n      margin: '25px 0'\r\n  },\r\n  quotationShow : {\r\n    color: 'white',\r\n    backgroundColor: 'orange'\r\n  }\r\n}));\r\n\r\nfunction QuotationForm() {  \r\n    const classes = useStyles();\r\n    \r\n\r\n    const quotationInitialState = {name : '', address: '', phoneNumber: '', email: '', gstin: '', products: []};\r\n    const productInitialState = {brand: '', modelNumber: '', quantity: '', discount: '', tax: ''};\r\n    \r\n    const [pdfLink, setPdfLink] = useState('');\r\n    const [quotation, setQuotation] = useState({});\r\n    const [searchResults, setSearchResults] = useState([]);\r\n    const [product, setProduct] = useState({});\r\n    const [open, setOpen] = React.useState(false);\r\n\r\n    db.collection('quotations').doc(\"zdsFSgVzK2m0BL5IFJDS\").get().then(function(doc){\r\n      console.log(doc.data());\r\n    }).catch(function(err){\r\n      console.log(\"Failled to get the doc from the database\");\r\n    });\r\n\r\n    async function searchDb(event){\r\n        setSearchResults([]);\r\n        if(event.target.value !== ''){\r\n          await db.collection('products').where('modelNumber', '>=', event.target.value).where('modelNumber', '<=', event.target.value + '\\uf8ff').get().then(function(snapshot){      \r\n            setSearchResults(snapshot.docs.map(doc => ( {productId:doc.id, modelNumber: doc.data().modelNumber, description: doc.data().description, price: doc.data().price} )));\r\n          });\r\n        }\r\n      }\r\n    \r\n      const searchListClickHandler = (selectedproduct) => {\r\n          setProduct({...product, ...selectedproduct});\r\n          setSearchResults([]);\r\n      }\r\n\r\n      const productInputHandler = (key, value) => {\r\n        setProduct({...product, [key]: value});\r\n      }\r\n\r\n      const customerInputHandler = (key, value) => {\r\n        setQuotation({...quotation, [key]: value});\r\n      }\r\n\r\n      const calculateProductPricing = (unitPrice, quantity, tax, discount) => {\r\n        const productPrice = unitPrice * quantity;\r\n        const taxValue = (tax/100)* productPrice;\r\n        const discountValue = (discount/100) * productPrice;\r\n        const totalPrice = (productPrice - discountValue) + taxValue;\r\n\r\n        const productPricing = {\r\n          productPrice : productPrice,\r\n          taxValue: taxValue,\r\n          discountValue: discountValue,\r\n          totalPrice: totalPrice\r\n        }\r\n\r\n        if(totalPrice === taxValue){\r\n            return 0\r\n        }else{\r\n          return productPricing;\r\n        }\r\n    }\r\n    \r\n      const addProductHandler = (event) => { \r\n          let newQuotation = quotation;   \r\n          let newProduct = product;  \r\n          let grandTotal = 0;\r\n          let totalTax = 0;\r\n          let totalDiscount = 0;;\r\n          let productPricing = calculateProductPricing(newProduct.price, newProduct.quantity, newProduct.tax, newProduct.discount);\r\n\r\n          newProduct['productPricing'] = productPricing;\r\n\r\n          newQuotation['products'] = newQuotation['products'] ? newQuotation['products'] : [];\r\n\r\n          newQuotation['products'].push(newProduct);\r\n\r\n          newQuotation.products.forEach(product => {\r\n            grandTotal += product.productPricing.totalPrice;\r\n            totalDiscount += product.productPricing.discountValue;\r\n            totalTax += product.productPricing.taxValue;\r\n          });\r\n\r\n          newQuotation['totalPricing'] = {\r\n            grandTotal: grandTotal,\r\n            totalDiscount: totalDiscount,\r\n            totalTax: totalTax,\r\n          };\r\n\r\n          setQuotation(newQuotation);\r\n          setProduct(productInitialState);\r\n\r\n          event.preventDefault();\r\n      }\r\n\r\n      const quotationSubmitHandler = () => {\r\n        let newQuotation = quotation;\r\n        newQuotation[\"timestamp\"] = firebase.firestore.FieldValue.serverTimestamp();\r\n        db.collection(\"quotations\").add(newQuotation).then(async function(docRef) {\r\n          setPdfLink(`https://us-central1-uniquote-d48ca.cloudfunctions.net/makePdf/quotations/${docRef.id}/pdf`);\r\n      })\r\n      .catch(function(error) {\r\n          console.error(\"Error adding document: \", error);\r\n      });\r\n\r\n        setQuotation(quotationInitialState);\r\n        setProduct(productInitialState);\r\n      }\r\n\r\n      const handleOpen = () => {\r\n        setOpen(true);\r\n      };\r\n    \r\n      const handleClose = () => {\r\n        setOpen(false);\r\n      };\r\n\r\n\r\n    return (\r\n        <div>\r\n            <h1>Create new Quotation</h1>\r\n            <CustomerInputForm quotation={quotation} customerInputHandler={customerInputHandler}></CustomerInputForm>\r\n            <ProductTable quotation={quotation} />\r\n            <ProductSearch \r\n                  addProductHandler={addProductHandler} \r\n                  productInputHandler={productInputHandler} \r\n                  searchResults={searchResults} \r\n                  product={product} searchDb={searchDb} \r\n                  calculateProductPrice={calculateProductPricing} \r\n                  searchListClickHandler={searchListClickHandler} \r\n                  />\r\n            \r\n            <Button className={classes.quotationSubmitButton} size=\"large\" variant=\"contained\" color=\"primary\" onClick={() => {quotationSubmitHandler(); handleOpen()}}>Save Quotation</Button> \r\n            <Modal open={open} handleClose={handleClose}>\r\n              <p>Quotation has been saved</p>\r\n              {/* <Button className={classes.quotationShow} size=\"large\" variant=\"contained\" color=\"\">Show Quotation</Button>  */}\r\n              <a href={pdfLink}>Download PDF</a>\r\n            </Modal>\r\n        </div>\r\n    )\r\n} \r\n\r\nexport default QuotationForm\r\n","C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\Products\\ProductSearch\\ProductSearch.js",["79"],"C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\UI\\Header.js",[],"C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\Home.js",[],"C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\Products\\AllProducts.js",[],"C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\Quotations\\AllQuotations.js",[],"C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\UI\\Logo\\Logo.js",[],"C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\Customers\\CustomerInputForm.js",[],"C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\Products\\ProductTable\\ProductTable.js",[],"C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\UI\\Layout\\Layout.js",[],"C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\QuotationTemplate\\QuotationTemplate.js",[],"C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\UI\\Modal\\Modal.js",[],"C:\\Users\\ayush\\Desktop\\programming\\uniquote\\src\\components\\Products\\ProductSearch\\ProductSearchResults\\ProductSearchResults.js",[],{"ruleId":"80","replacedBy":"81"},{"ruleId":"82","replacedBy":"83"},{"ruleId":"84","severity":1,"message":"85","line":11,"column":9,"nodeType":"86","messageId":"87","endLine":11,"endColumn":13},{"ruleId":"84","severity":1,"message":"88","line":4,"column":8,"nodeType":"86","messageId":"87","endLine":4,"endColumn":14},"no-native-reassign",["89"],"no-negated-in-lhs",["90"],"no-unused-vars","'Link' is defined but never used.","Identifier","unusedVar","'Button' is defined but never used.","no-global-assign","no-unsafe-negation"]